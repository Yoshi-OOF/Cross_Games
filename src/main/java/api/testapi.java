package api;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import model.Game;
import pojo.Result;
import pojo.ResultGame;

public class testapi {

    public static void main(String[] args) {
        try {
            searchGame();
        } catch (GameNotFoundException e) {
            e.printStackTrace();
        }
    }

    public static void searchGame() throws GameNotFoundException {

        String responsebody = "{\"count\":174,\"next\":\"https://api.rawg.io/api/games?key=bed0e2440362497d86cfd2b400a1fd31&page=2&page_size=1&search=Zelda&search_exact=1\",\"previous\":null,\"results\":[{\"slug\":\"zelda\",\"name\":\"!Zelda\",\"playtime\":0,\"platforms\":[{\"platform\":{\"id\":171,\"name\":\"Web\",\"slug\":\"web\"}}],\"stores\":[{\"store\":{\"id\":9,\"name\":\"itch.io\",\"slug\":\"itch\"}}],\"released\":\"2020-02-19\",\"tba\":false,\"background_image\":\"https://media.rawg.io/media/screenshots/efa/efa59bd0fed6969e7175dee1a6238c2d.jpg\",\"rating\":0.0,\"rating_top\":0,\"ratings\":[],\"ratings_count\":0,\"reviews_text_count\":0,\"added\":0,\"added_by_status\":null,\"metacritic\":null,\"suggestions_count\":19,\"updated\":\"2020-02-21T03:16:12\",\"id\":413428,\"score\":\"11.116092\",\"clip\":null,\"tags\":[{\"id\":45,\"name\":\"2D\",\"slug\":\"2d\",\"language\":\"eng\",\"games_count\":85731,\"image_background\":\"https://media.rawg.io/media/games/14a/14a83c56ff668baaced6e8c8704b6391.jpg\"},{\"id\":260,\"name\":\"GameMaker\",\"slug\":\"gamemaker\",\"language\":\"eng\",\"games_count\":5511,\"image_background\":\"https://media.rawg.io/media/screenshots/ee4/ee45c49e1507ef9f8ec85219d655aa00.jpg\"},{\"id\":61,\"name\":\"Top-Down\",\"slug\":\"top-down\",\"language\":\"eng\",\"games_count\":8964,\"image_background\":\"https://media.rawg.io/media/games/f3e/f3eec35c6218dcfd93a537751e6bfa61.jpg\"},{\"id\":867,\"name\":\"zelda\",\"slug\":\"zelda\",\"language\":\"eng\",\"games_count\":297,\"image_background\":\"https://media.rawg.io/media/screenshots/203/203b13cab5edb554e958e70ab243415d.jpg\"}],\"esrb_rating\":null,\"user_game\":null,\"reviews_count\":0,\"community_rating\":0,\"saturated_color\":\"0f0f0f\",\"dominant_color\":\"0f0f0f\",\"short_screenshots\":[{\"id\":-1,\"image\":\"https://media.rawg.io/media/screenshots/efa/efa59bd0fed6969e7175dee1a6238c2d.jpg\"},{\"id\":2295873,\"image\":\"https://media.rawg.io/media/screenshots/efa/efa59bd0fed6969e7175dee1a6238c2d.jpg\"}],\"parent_platforms\":[{\"platform\":{\"id\":14,\"name\":\"Web\",\"slug\":\"web\"}}],\"genres\":[{\"id\":3,\"name\":\"Adventure\",\"slug\":\"adventure\"}]}],\"user_platforms\":false}\n";
        String responsebodySkyrim = "{\"count\":14,\"next\":\"https://api.rawg.io/api/games?key=bed0e2440362497d86cfd2b400a1fd31&page=2&page_size=1&search=Skyrim&search_exact=5\",\"previous\":null,\"results\":[{\"slug\":\"8bit-skyrim\",\"name\":\"8Bit Skyrim\",\"playtime\":0,\"platforms\":[{\"platform\":{\"id\":5,\"name\":\"macOS\",\"slug\":\"macos\"}}],\"stores\":[{\"store\":{\"id\":9,\"name\":\"itch.io\",\"slug\":\"itch\"}}],\"released\":\"2016-11-07\",\"tba\":false,\"background_image\":\"https://media.rawg.io/media/screenshots/81d/81d0457f34f96874618b6449e8c63575.jpg\",\"rating\":0.0,\"rating_top\":0,\"ratings\":[],\"ratings_count\":0,\"reviews_text_count\":0,\"added\":0,\"added_by_status\":null,\"metacritic\":null,\"suggestions_count\":132,\"updated\":\"2019-01-09T12:41:06\",\"id\":104224,\"score\":\"11.417834\",\"clip\":null,\"tags\":[{\"id\":45,\"name\":\"2D\",\"slug\":\"2d\",\"language\":\"eng\",\"games_count\":85731,\"image_background\":\"https://media.rawg.io/media/games/14a/14a83c56ff668baaced6e8c8704b6391.jpg\"},{\"id\":652,\"name\":\"8-Bit\",\"slug\":\"8-bit\",\"language\":\"eng\",\"games_count\":6926,\"image_background\":\"https://media.rawg.io/media/screenshots/16c/16c1f5e91a061e064f373406164d1e40.jpg\"},{\"id\":741,\"name\":\"16-bit\",\"slug\":\"16-bit\",\"language\":\"eng\",\"games_count\":4243,\"image_background\":\"https://media.rawg.io/media/screenshots/dc1/dc18dca28cf41bef3626cb7d52177e62.jpg\"},{\"id\":8398,\"name\":\"skyrim\",\"slug\":\"skyrim\",\"language\":\"eng\",\"games_count\":7,\"image_background\":\"https://media.rawg.io/media/screenshots/f1c/f1c96cb5ead4fa79a8f66b2e168a7892.jpg\"}],\"esrb_rating\":null,\"user_game\":null,\"reviews_count\":0,\"community_rating\":0,\"saturated_color\":\"0f0f0f\",\"dominant_color\":\"0f0f0f\",\"short_screenshots\":[{\"id\":-1,\"image\":\"https://media.rawg.io/media/screenshots/81d/81d0457f34f96874618b6449e8c63575.jpg\"},{\"id\":1049681,\"image\":\"https://media.rawg.io/media/screenshots/96d/96da6e4c8820ed710a335cf48a71c4ef.jpg\"},{\"id\":1049683,\"image\":\"https://media.rawg.io/media/screenshots/abe/abe5e63a4bce9d67a7fa9eaa812ebfce.jpg\"},{\"id\":1049684,\"image\":\"https://media.rawg.io/media/screenshots/9b3/9b30c0c05715ed5e289535ec4908c929.jpg\"},{\"id\":1049685,\"image\":\"https://media.rawg.io/media/screenshots/dc0/dc0803493ce8bf2cff672418b4076e7c.jpg\"},{\"id\":1049686,\"image\":\"https://media.rawg.io/media/screenshots/9af/9af4b852fcac23f0da2a45c1bf36a294.jpg\"},{\"id\":1049687,\"image\":\"https://media.rawg.io/media/screenshots/677/677173b38a90765633978242ae7604b7.jpg\"}],\"parent_platforms\":[{\"platform\":{\"id\":5,\"name\":\"Apple Macintosh\",\"slug\":\"mac\"}}],\"genres\":[{\"id\":83,\"name\":\"Platformer\",\"slug\":\"platformer\"},{\"id\":3,\"name\":\"Adventure\",\"slug\":\"adventure\"},{\"id\":4,\"name\":\"Action\",\"slug\":\"action\"}]}],\"user_platforms\":false}\n";
        String responsebodyAlinkto = "{\"count\":6,\"next\":\"https://api.rawg.io/api/games?key=bed0e2440362497d86cfd2b400a1fd31&page=2&page_size=1&search=Zelda+A+link+to+&search_exact=5\",\"previous\":null,\"results\":[{\"slug\":\"zelda-rpg-links-reawakening\",\"name\":\"Zelda RPG: Link's Reawakening\",\"playtime\":0,\"platforms\":[{\"platform\":{\"id\":4,\"name\":\"PC\",\"slug\":\"pc\"}},{\"platform\":{\"id\":5,\"name\":\"macOS\",\"slug\":\"macos\"}},{\"platform\":{\"id\":6,\"name\":\"Linux\",\"slug\":\"linux\"}}],\"stores\":[{\"store\":{\"id\":9,\"name\":\"itch.io\",\"slug\":\"itch\"}}],\"released\":\"2021-06-20\",\"tba\":false,\"background_image\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\",\"rating\":0.0,\"rating_top\":0,\"ratings\":[{\"id\":1,\"title\":\"skip\",\"count\":1,\"percent\":100.0}],\"ratings_count\":1,\"reviews_text_count\":0,\"added\":0,\"added_by_status\":null,\"metacritic\":null,\"suggestions_count\":78,\"updated\":\"2022-08-23T18:58:17\",\"id\":624566,\"score\":\"12.728524\",\"clip\":null,\"tags\":[{\"id\":102,\"name\":\"Turn-Based\",\"slug\":\"turn-based\",\"language\":\"eng\",\"games_count\":4902,\"image_background\":\"https://media.rawg.io/media/games/63c/63cb04333dea1726e90b38dc3d10258f.jpg\"},{\"id\":12894,\"name\":\"sequel\",\"slug\":\"sequel\",\"language\":\"eng\",\"games_count\":169,\"image_background\":\"https://media.rawg.io/media/screenshots/54f/54fc260d02bb44b7ef9c39cdc8aa2191_TA7nfkk.jpg\"},{\"id\":66558,\"name\":\"links-reawakening\",\"slug\":\"links-reawakening\",\"language\":\"eng\",\"games_count\":1,\"image_background\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\"},{\"id\":66559,\"name\":\"passion-project\",\"slug\":\"passion-project\",\"language\":\"eng\",\"games_count\":1,\"image_background\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\"},{\"id\":66560,\"name\":\"zelda-rpg\",\"slug\":\"zelda-rpg\",\"language\":\"eng\",\"games_count\":1,\"image_background\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\"}],\"esrb_rating\":null,\"user_game\":null,\"reviews_count\":1,\"community_rating\":0,\"saturated_color\":\"0f0f0f\",\"dominant_color\":\"0f0f0f\",\"short_screenshots\":[{\"id\":-1,\"image\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\"},{\"id\":2904040,\"image\":\"https://media.rawg.io/media/screenshots/4bd/4bdaa80f7dc2c4f1ced2770294dec6e7.jpg\"},{\"id\":2904041,\"image\":\"https://media.rawg.io/media/screenshots/415/4155405ff677471adc4829537aa7fffe.jpg\"},{\"id\":2904042,\"image\":\"https://media.rawg.io/media/screenshots/cdb/cdb1f4a4f43b04fc1669a3c3177004a0.jpg\"},{\"id\":2904043,\"image\":\"https://media.rawg.io/media/screenshots/8ab/8abcf7f6c665da96208d22921e5a0be6.jpg\"},{\"id\":2904044,\"image\":\"https://media.rawg.io/media/screenshots/f1e/f1ea11f142c5b1c022a58d7372a29bc0.jpg\"},{\"id\":2904045,\"image\":\"https://media.rawg.io/media/screenshots/10a/10a383c77fdcf98d8cbb9ed56cf96b95.jpg\"}],\"parent_platforms\":[{\"platform\":{\"id\":1,\"name\":\"PC\",\"slug\":\"pc\"}},{\"platform\":{\"id\":5,\"name\":\"Apple Macintosh\",\"slug\":\"mac\"}},{\"platform\":{\"id\":6,\"name\":\"Linux\",\"slug\":\"linux\"}}],\"genres\":[{\"id\":5,\"name\":\"RPG\",\"slug\":\"role-playing-games-rpg\"}]}],\"user_platforms\":false}\n";
        String responsebodyZeldaTears = "{\"count\":1,\"next\":null,\"previous\":null,\"results\":[{\"slug\":\"the-legend-of-zelda-breath-of-the-wild-sequel\",\"name\":\"The Legend of Zelda: Tears of the Kingdom\",\"playtime\":0,\"platforms\":[{\"platform\":{\"id\":7,\"name\":\"Nintendo Switch\",\"slug\":\"nintendo-switch\"}}],\"stores\":[{\"store\":{\"id\":6,\"name\":\"Nintendo Store\",\"slug\":\"nintendo\"}}],\"released\":\"2023-05-12\",\"tba\":false,\"background_image\":\"https://media.rawg.io/media/games/556/55684bfd048706f4266d331d70050b37.jpg\",\"rating\":4.46,\"rating_top\":5,\"ratings\":[{\"id\":5,\"title\":\"exceptional\",\"count\":256,\"percent\":71.31},{\"id\":4,\"title\":\"recommended\",\"count\":64,\"percent\":17.83},{\"id\":1,\"title\":\"skip\",\"count\":26,\"percent\":7.24},{\"id\":3,\"title\":\"meh\",\"count\":13,\"percent\":3.62}],\"ratings_count\":349,\"reviews_text_count\":9,\"added\":1407,\"added_by_status\":{\"yet\":156,\"owned\":215,\"beaten\":223,\"toplay\":577,\"dropped\":68,\"playing\":168},\"metacritic\":96,\"suggestions_count\":471,\"updated\":\"2024-06-06T18:46:41\",\"id\":327239,\"score\":\"13.449931\",\"clip\":null,\"tags\":[{\"id\":31,\"name\":\"Singleplayer\",\"slug\":\"singleplayer\",\"language\":\"eng\",\"games_count\":220522,\"image_background\":\"https://media.rawg.io/media/games/511/5118aff5091cb3efec399c808f8c598f.jpg\"},{\"id\":24,\"name\":\"RPG\",\"slug\":\"rpg\",\"language\":\"eng\",\"games_count\":20341,\"image_background\":\"https://media.rawg.io/media/games/ee3/ee3e10193aafc3230ba1cae426967d10.jpg\"},{\"id\":36,\"name\":\"Open World\",\"slug\":\"open-world\",\"language\":\"eng\",\"games_count\":7266,\"image_background\":\"https://media.rawg.io/media/games/511/5118aff5091cb3efec399c808f8c598f.jpg\"},{\"id\":37,\"name\":\"Sandbox\",\"slug\":\"sandbox\",\"language\":\"eng\",\"games_count\":6746,\"image_background\":\"https://media.rawg.io/media/games/849/849414b978db37d4563ff9e4b0d3a787.jpg\"},{\"id\":37796,\"name\":\"exclusive\",\"slug\":\"exclusive\",\"language\":\"eng\",\"games_count\":4496,\"image_background\":\"https://media.rawg.io/media/games/951/951572a3dd1e42544bd39a5d5b42d234.jpg\"},{\"id\":425,\"name\":\"Single player only\",\"slug\":\"single-player-only\",\"language\":\"eng\",\"games_count\":31,\"image_background\":\"https://media.rawg.io/media/screenshots/3eb/3eb918422509a15405e723cf18cddc34.jpg\"},{\"id\":867,\"name\":\"zelda\",\"slug\":\"zelda\",\"language\":\"eng\",\"games_count\":452,\"image_background\":\"https://media.rawg.io/media/screenshots/b23/b23b3b0f25b10123c0338cf9f5c8bc12.jpg\"}],\"esrb_rating\":{\"id\":2,\"name\":\"Everyone 10+\",\"slug\":\"everyone-10-plus\",\"name_en\":\"Everyone 10+\",\"name_ru\":\"С 10 лет\"},\"user_game\":null,\"reviews_count\":359,\"saturated_color\":\"0f0f0f\",\"dominant_color\":\"0f0f0f\",\"short_screenshots\":[{\"id\":-1,\"image\":\"https://media.rawg.io/media/games/556/55684bfd048706f4266d331d70050b37.jpg\"},{\"id\":1961492,\"image\":\"https://media.rawg.io/media/screenshots/51f/51f7928a2630fc4bbb3dac59b8f31448.jpg\"},{\"id\":1961493,\"image\":\"https://media.rawg.io/media/screenshots/104/10431d15726ed2593401cc70e2115a82.jpg\"},{\"id\":1961494,\"image\":\"https://media.rawg.io/media/screenshots/c0d/c0dafd15ec182acab8f5879665eaa642.jpg\"},{\"id\":1961495,\"image\":\"https://media.rawg.io/media/screenshots/725/725dbbf72f15a32f418a42d2e8ac8b25.jpg\"},{\"id\":1961496,\"image\":\"https://media.rawg.io/media/screenshots/c63/c63fda6df2574a7d071f96082438e820.jpg\"},{\"id\":2897101,\"image\":\"https://media.rawg.io/media/screenshots/c92/c92c2acf519b3dc613c0f0085cc34b34.jpg\"}],\"parent_platforms\":[{\"platform\":{\"id\":7,\"name\":\"Nintendo\",\"slug\":\"nintendo\"}}],\"genres\":[{\"id\":3,\"name\":\"Adventure\",\"slug\":\"adventure\"},{\"id\":4,\"name\":\"Action\",\"slug\":\"action\"}]}],\"user_platforms\":false}\n";

        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);

        ResultGame result;
        try {
            result = objectMapper.readValue(responsebody, ResultGame.class);
            if (result.getResults().length == 0) {
                throw new GameNotFoundException();
            }
            Result firstResult = result.getResults()[0];
            System.out.println(firstResult.getName());
            System.out.println(firstResult.getBackgroundImage());

        } catch (JsonProcessingException e) {
            e.printStackTrace();
        }

    }

}
